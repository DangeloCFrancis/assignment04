---
title: "index"
author: "D'Angelo Francis; Su Yeon Seo"
format: html
---

```{r setup, message=FALSE, warning=FALSE}

# make sure to load all packages here up top. If you need to install a package, include the commented code here as well :)

library(fontawesome) # install.packages("fontawesome") - for waffle graphs
library(styler) # install.packages("styler") - check for Tidy style guide adherence
library(lintr) # install.packages("lintr") - check for Tidy style guide adherence
library(tidyverse)
library(readxl)
library(haven)
library(tidyverse)
library(patchwork) # easy combine plots
library(tigris) # direct download of shape files from US Cenus 
library(sf) # manipulate shapefiles 
library(tidycensus) # shapefiles from Census 
library(rgeoboundaries) # international boundaries 
library(ggrepel)  # install.packages("ggrepel")
library(janitor)  # install.packages("janitor")
library(ggthemes) # install.packages("ggthemes")


options(scipen=999) # no scientific notation for my plots


```

## Quick Reference Links:

I believe that we will need these links 

- [Figures](https://quarto.org/docs/authoring/figures.html)
- [Cross Reference](https://quarto.org/docs/authoring/cross-references.html)
- [Tidyverse Style Guide Packages](https://style.tidyverse.org/)
- [Urban Style Visualization Style Guide](https://urbaninstitute.github.io/r-at-urban/graphics-guide.html)

Research Question: What is the relationship between household income and fertility among Koreans by province?

## Graph 1 - 

```{{r hold off on gdp for now}}

 # rok_gdp_by_province <- don't worry about GDP here
  read_excel("data/ROK_gdp_by_province.xlsx") |>
  clean_names() |>
  mutate(region = case_when(
    region == "Gangwon Province, South Korea" ~ "Gangwon",
    region == "Gyeonggi Province" ~ "Gyeonggi",
    region == "Jeju Province" ~ "Jeju",
    region == "North Chungcheong Province" ~ "North Chungcheong",
    region == "North Gyeongsang Province" ~ "North Gyeongsang",
    region == "North Jeolla Province" ~ "North Jeolla",
    region == "South Chungcheong Province" ~ "South Chungcheong",
    region == "South Gyeongsang Province" ~ "South Gyeongsang",
    region == "South Jeolla Province" ~ "South Jeolla",
    .default = region
  )
  )
```

```{r graph 1}

# bringing in data source , clean data up

rok_fertility_province <- 
  read_csv("data/Agespecific_Fertility_Rate_Province__20241008012056.csv") |>
  clean_names() |>
  pivot_longer(
    cols = starts_with("x", ignore.case = TRUE),
    names_to = "year",
    values_to = "fertility_rate"
    ) |>
  rename(shapeName = by_province_1 , age = by_age_1) |>
  select(-by_variant_1) |>
  filter(shapeName != "Whole country", age == "TFR", year == "x2022") |>
  mutate(shapeName = case_when(
    shapeName == "Chungcheongbuk-do" ~ "North Chungcheong",
    shapeName == "Chungcheongnam-do" ~ "South Chungcheong",
    shapeName == "Jeollabuk-do" ~ "North Jeolla",
    shapeName == "Jeollanam-do" ~ "South Jeolla",
    shapeName == "Gyeongsangbuk-do" ~ "North Gyeongsang",
    shapeName == "Gyeongsangnam-do" ~ "South Gyeongsang",
    shapeName == "Jeju-do" ~ "Jeju",
    shapeName == "Gangwon-do" ~ "Gangwon",
    shapeName == "Gyeonggi-do" ~ "Gyeonggi",
    .default = shapeName
    )
  ) 

rok_fertility_shapefile <- 
  full_join(rok, rok_fertility_province, by = join_by(shapeName)) |>
  st_as_sf()

# plot code

rok <- geoboundaries(
  country = "Republic of Korea",
  adm_lvl = "adm1")

rok_cities <- 
  read_sf("data/cities.geojson") |>
  clean_names() |>
  filter(ctry == "South Korea")

ggplot() + 
  geom_sf(data = rok_fertility_shapefile, aes(fill = fertility_rate)) +
  scale_fill_gradient(
    name = "Total Fertility Rate",
    low = "#CD2E3A",
    high = "#0F64CD"
  ) + 
  theme(
    panel.background = element_blank(),
    axis.ticks = element_blank(),
    axis.text = element_blank()
  ) + 
  geom_sf_text(stat = "sf_coordinates")

```

**MAKE SURE TO COMMIT AFTER FINSIHING**

\pagebreak

## Graph 2 - 

Data Source: []() - remember to add to repo

```{r graph 2}


gdp_2023 <- 
  read_excel("gdp_2023.xls") |>
  clean_names() # from janitor() package 

gdp_2023 <- 
  gdp_2023 |>
  pivot_longer(
    cols = starts_with("x", ignore.case = TRUE),
    names_to = "year",
    values_to = "gdp",
    values_drop_na = TRUE
    ) |>
  select(-indicator_code) # not needed 


```

**MAKE SURE TO COMMIT AFTER FINSIHING**

\pagebreak

## Graph 3 -

Data Source: []() - remember to add to repo

```{r}


```

**MAKE SURE TO COMMIT AFTER FINSIHING**

## Graph 4 - 

Data Source: []() - remember to add to repo 

```{r}


```

**MAKE SURE TO COMMIT AFTER FINSIHING**

\pagebreak 
